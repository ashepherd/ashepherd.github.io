<!DOCTYPE html>
<html>
<head>
  <meta charset=utf-8 />
  <title>Leaflet Map</title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- Load jQuery -->
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

  <!-- Load Leaflet from CDN-->
  <!-- Load Leaflet from CDN-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/leaflet/0.7.3/leaflet.css" />
  <script src="https://cdn.jsdelivr.net/leaflet/0.7.3/leaflet.js"></script>
  <script src="https://leaflet.github.io/Leaflet.label/leaflet.label.js"></script>

   <!-- Load Esri Leaflet from CDN -->
  <script src="https://cdn.jsdelivr.net/leaflet.esri/1.0.0/esri-leaflet.js"></script>
  
  <style>
    body { margin:0; padding:0; }
    #map { position: absolute; top:0; bottom:0; right:0; left:200px; }
  </style>
</head>
<body>
  <div id="features-list-block" style="inline-block; float:left">
    <h3>List of features</h3>
    <ul id="features-list">
    </ul>
  </div>
  <div id="map" style="inline-blockl float: right"></div>
  <script id="geojson-data" src="/features-test.json" type="application/json"></script>
  <script>
    // Get the data.

    var json= '';
    
    $(function() {
      $.ajax({
          method: "GET",
          cache: true,
          url: $("#geojson-data").attr('src'),
          dataType: "text"
      }).done(function(data, textStatus, jqXHR){
        json=JSON.parse(data);
        var items = [];
        $.each(json["features"], function( index, element ) {
          console.log(element["properties"]["URL"]);  
          items.push('<li>' + element["properties"]["URL"] + '</li>');
        });
        $('#features-list').append( items.join('') );
      }).fail(function(jqXHR, textStatus, errorThrown){
        alert("Could not load the GeoJSON: " + $("#geojson-data").attr('src'));
      });
    });
    
    (function () {

      var map = L.map('map');

      L.esri.basemapLayer('Oceans').addTo(map);
      L.esri.basemapLayer('OceansLabels').addTo(map);

      var legend = L.control({position: 'bottomright'});

    })();
  </script>
  </body>
</html>
